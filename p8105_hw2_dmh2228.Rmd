---
title: "P8105 Homework 2"
author: "Diana Hernandez"
date: "2023-10-04"
output: github_document
---

# load tidyverse

```{r}
library(tidyverse)
```

# Problem 1: using FiveThirtyEight dataset

# Data wrangling of pols_month_data

```{r}
pols_month_data = 
  read_csv("./fivethirtyeight_datasets/pols-month.csv") |>
  separate(col=mon, into=c('year', 'month', 'day'), sep='-') |>
  mutate(
    month = case_match(
      month,
      "01" ~ "January",
      "02" ~ "February",
      "03" ~ "March",
      "04" ~ "April",
      "05" ~ "May",
      "06" ~ "June",
      "07" ~ "July",
      "08" ~ "August",
      "09" ~ "September",
      "10" ~ "October",
      "11" ~ "November",
      "12" ~ "December"
    ),
    president =
      if_else(prez_gop==1, paste("Republican"), paste("Democrat"))
              )|>
  select(-prez_dem, -prez_gop, -day)
```

# Data wrangling of snp_data

```{r}
snp_data = 
  read_csv("./fivethirtyeight_datasets/snp.csv") |>
  separate(col=date, into=c('month', 'day', 'year'), sep='/') |>
  select('year', 'month', 'day', everything()) |>
  mutate(
    month = case_match(
      month,
      "1" ~ "January",
      "2" ~ "February",
      "3" ~ "March",
      "4" ~ "April",
      "5" ~ "May",
      "6" ~ "June",
      "7" ~ "July",
      "8" ~ "August",
      "9" ~ "September",
      "10" ~ "October",
      "11" ~ "November",
      "12" ~ "December"),
    year = if_else(year < 50, paste('20',year), paste('19',year)),
    year = gsub(" ","",year) 
    ) |>
  select(-day)
```

# Data wrangling of unemployment_data

```{r}
unemployment_data = 
  read_csv("./fivethirtyeight_datasets/unemployment.csv") |> 
  janitor::clean_names() |>
  pivot_longer(
    jan:dec,
    names_to = "month",
    values_to = "unemployment"
  ) |> 
  mutate(
    month = case_match(
      month,
      "jan" ~ "January",
      "feb" ~ "February",
      "mar" ~ "March",
      "apr" ~ "April",
      "may" ~ "May",
      "jun" ~ "June",
      "jul" ~ "July",
      "aug" ~ "August",
      "sep" ~ "September",
      "oct" ~ "October",
      "nov" ~ "November",
      "dec" ~ "December"),
    year = as.character(year)
    )
```

# Data merging of the FiveThirtyEight datasets

```{r}
five_thirty_eight_data =
  inner_join(pols_month_data, snp_data)

final_five_thirty_eight_data =
  inner_join(five_thirty_eight_data, unemployment_data)
```

The pols_month dataset includes the following variables: year, month, gov_gop, sen_gop, rep_gop, gov_dem, sen_dem, rep dem, and president. The snp dataset includes the following variables: year, month, and close. The unemployment dataset includes the following variables: year, month, and unemployment rate.

The final FiveThirtyEight dataset includes the following datasets: pols_month, snp, and unemployment. The final dataset has 786 rows and 11 columns. There are 11 key variables: year, month, gov_gop, sen_gop, rep_gop, gov_dem, sen_dem, rep_dem, president, close, and unemployment. The years range from 1950 to 2015. 

# Problem 2: using Mr. Trash Wheel dataset

# Load readxl to import Excel dataset

```{r}
library(readxl)
```

# Data wrangling of Mr. Trash Wheel dataset

```{r}
mr_trash_wheel_data = 
  read_excel("./trashwheel_dataset/trash_wheel_collection_data.xlsx", 
             n_max = 584) |>
  janitor::clean_names() |>
  select(-homes_powered, -15, -16) |>
  mutate(
    homes_powered = (500*weight_tons)/30,
    dataset = "Mr. Trash Wheel",
    year = as.numeric(year)
    )
```
