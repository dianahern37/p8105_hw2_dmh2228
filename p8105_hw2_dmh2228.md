P8105 Homework 2
================
Diana Hernandez
2023-10-04

# load tidyverse

``` r
library(tidyverse)
```

    ## ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
    ## ✔ dplyr     1.1.3     ✔ readr     2.1.4
    ## ✔ forcats   1.0.0     ✔ stringr   1.5.0
    ## ✔ ggplot2   3.4.3     ✔ tibble    3.2.1
    ## ✔ lubridate 1.9.2     ✔ tidyr     1.3.0
    ## ✔ purrr     1.0.2     
    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()
    ## ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors

# Problem 1: using FiveThirtyEight dataset

# Data wrangling of pols_month_data

``` r
pols_month_data = 
  read_csv("./fivethirtyeight_datasets/pols-month.csv") |>
  separate(col=mon, into=c('year', 'month', 'day'), sep='-') |>
  mutate(
    month = case_match(
      month,
      "01" ~ "January",
      "02" ~ "February",
      "03" ~ "March",
      "04" ~ "April",
      "05" ~ "May",
      "06" ~ "June",
      "07" ~ "July",
      "08" ~ "August",
      "09" ~ "September",
      "10" ~ "October",
      "11" ~ "November",
      "12" ~ "December"
    ),
    president =
      if_else(prez_gop==1, paste("Republican"), paste("Democrat"))
              )|>
  select(-prez_dem, -prez_gop, -day)
```

    ## Rows: 822 Columns: 9
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl  (8): prez_gop, gov_gop, sen_gop, rep_gop, prez_dem, gov_dem, sen_dem, r...
    ## date (1): mon
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

# Data wrangling of snp_data

``` r
snp_data = 
  read_csv("./fivethirtyeight_datasets/snp.csv") |>
  separate(col=date, into=c('month', 'day', 'year'), sep='/') |>
  select('year', 'month', 'day', everything()) |>
  mutate(
    month = case_match(
      month,
      "1" ~ "January",
      "2" ~ "February",
      "3" ~ "March",
      "4" ~ "April",
      "5" ~ "May",
      "6" ~ "June",
      "7" ~ "July",
      "8" ~ "August",
      "9" ~ "September",
      "10" ~ "October",
      "11" ~ "November",
      "12" ~ "December"),
    year = if_else(year < 50, paste('20',year), paste('19',year)),
    year = gsub(" ","",year) 
    ) |>
  select(-day)
```

    ## Rows: 787 Columns: 2
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (1): date
    ## dbl (1): close
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

# Data wrangling of unemployment_data

``` r
unemployment_data = 
  read_csv("./fivethirtyeight_datasets/unemployment.csv") |> 
  janitor::clean_names() |>
  pivot_longer(
    jan:dec,
    names_to = "month",
    values_to = "unemployment"
  ) |> 
  mutate(
    month = case_match(
      month,
      "jan" ~ "January",
      "feb" ~ "February",
      "mar" ~ "March",
      "apr" ~ "April",
      "may" ~ "May",
      "jun" ~ "June",
      "jul" ~ "July",
      "aug" ~ "August",
      "sep" ~ "September",
      "oct" ~ "October",
      "nov" ~ "November",
      "dec" ~ "December"),
    year = as.character(year)
    )
```

    ## Rows: 68 Columns: 13
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (13): Year, Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

# Data merging of the FiveThirtyEight datasets

``` r
five_thirty_eight_data =
  inner_join(pols_month_data, snp_data)
```

    ## Joining with `by = join_by(year, month)`

``` r
final_five_thirty_eight_data =
  inner_join(five_thirty_eight_data, unemployment_data)
```

    ## Joining with `by = join_by(year, month)`

The pols_month dataset includes the following variables: year, month,
gov_gop, sen_gop, rep_gop, gov_dem, sen_dem, rep dem, and president. The
snp dataset includes the following variables: year, month, and close.
The unemployment dataset includes the following variables: year, month,
and unemployment rate.

The final FiveThirtyEight dataset includes the following datasets:
pols_month, snp, and unemployment. The final dataset has 786 rows and 11
columns. There are 11 key variables: year, month, gov_gop, sen_gop,
rep_gop, gov_dem, sen_dem, rep_dem, president, close, and unemployment.
The years range from 1950 to 2015.
