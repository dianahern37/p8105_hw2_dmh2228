P8105 Homework 2
================
Diana Hernandez
2023-10-04

# load tidyverse

``` r
library(tidyverse)
```

    ## ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
    ## ✔ dplyr     1.1.3     ✔ readr     2.1.4
    ## ✔ forcats   1.0.0     ✔ stringr   1.5.0
    ## ✔ ggplot2   3.4.3     ✔ tibble    3.2.1
    ## ✔ lubridate 1.9.2     ✔ tidyr     1.3.0
    ## ✔ purrr     1.0.2     
    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()
    ## ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors

# Problem 1: using FiveThirtyEight dataset

# Data wrangling of pols_month_data

``` r
pols_month_data = 
  read_csv("./fivethirtyeight_datasets/pols-month.csv") |>
  separate(col=mon, into=c('year', 'month', 'day'), sep='-') |>
  mutate(
    month = case_match(
      month,
      "01" ~ "January",
      "02" ~ "February",
      "03" ~ "March",
      "04" ~ "April",
      "05" ~ "May",
      "06" ~ "June",
      "07" ~ "July",
      "08" ~ "August",
      "09" ~ "September",
      "10" ~ "October",
      "11" ~ "November",
      "12" ~ "December"
    ),
    president =
      if_else(prez_gop==1, paste("Republican"), paste("Democrat"))
              )|>
  select(-prez_dem, -prez_gop, -day)
```

    ## Rows: 822 Columns: 9
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl  (8): prez_gop, gov_gop, sen_gop, rep_gop, prez_dem, gov_dem, sen_dem, r...
    ## date (1): mon
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

# Data wrangling of snp_data

``` r
snp_data = 
  read_csv("./fivethirtyeight_datasets/snp.csv") |>
  separate(col=date, into=c('month', 'day', 'year'), sep='/') |>
  select('year', 'month', 'day', everything()) |>
  mutate(
    month = case_match(
      month,
      "1" ~ "January",
      "2" ~ "February",
      "3" ~ "March",
      "4" ~ "April",
      "5" ~ "May",
      "6" ~ "June",
      "7" ~ "July",
      "8" ~ "August",
      "9" ~ "September",
      "10" ~ "October",
      "11" ~ "November",
      "12" ~ "December"),
    year = if_else(year < 50, paste('20',year), paste('19',year)),
    year = gsub(" ","",year) 
    ) |>
  select(-day)
```

    ## Rows: 787 Columns: 2
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (1): date
    ## dbl (1): close
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

# Data wrangling of unemployment_data

``` r
unemployment_data = 
  read_csv("./fivethirtyeight_datasets/unemployment.csv") |> 
  janitor::clean_names() |>
  pivot_longer(
    jan:dec,
    names_to = "month",
    values_to = "unemployment"
  ) |> 
  mutate(
    month = case_match(
      month,
      "jan" ~ "January",
      "feb" ~ "February",
      "mar" ~ "March",
      "apr" ~ "April",
      "may" ~ "May",
      "jun" ~ "June",
      "jul" ~ "July",
      "aug" ~ "August",
      "sep" ~ "September",
      "oct" ~ "October",
      "nov" ~ "November",
      "dec" ~ "December"),
    year = as.character(year)
    )
```

    ## Rows: 68 Columns: 13
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (13): Year, Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

# Data merging of the FiveThirtyEight datasets

``` r
five_thirty_eight_data =
  inner_join(pols_month_data, snp_data)
```

    ## Joining with `by = join_by(year, month)`

``` r
final_five_thirty_eight_data =
  inner_join(five_thirty_eight_data, unemployment_data)
```

    ## Joining with `by = join_by(year, month)`

The pols_month dataset includes the following variables: year, month,
gov_gop, sen_gop, rep_gop, gov_dem, sen_dem, rep dem, and president. The
snp dataset includes the following variables: year, month, and close.
The unemployment dataset includes the following variables: year, month,
and unemployment rate.

The final FiveThirtyEight dataset includes the following datasets:
pols_month, snp, and unemployment. The final dataset has 786 rows and 11
columns. There are 11 key variables: year, month, gov_gop, sen_gop,
rep_gop, gov_dem, sen_dem, rep_dem, president, close, and unemployment.
The years range from 1950 to 2015.

# Problem 2: using Mr. Trash Wheel dataset

# Load readxl to import Excel dataset

``` r
library(readxl)
```

# Data wrangling of Mr. Trash Wheel dataset

``` r
mr_trash_wheel_data = 
  read_excel("./trashwheel_dataset/trash_wheel_collection_data.xlsx", 
             n_max = 584) |>
  janitor::clean_names() |>
  select(-homes_powered, -15, -16) |>
  mutate(
    homes_powered = (500*weight_tons)/30,
    dataset = "Mr. Trash Wheel",
    year = as.numeric(year)
    )
```

    ## New names:
    ## • `` -> `...15`
    ## • `` -> `...16`

# Data wrangling of Professor Trash Wheel dataset

``` r
professor_trash_wheel_data =
  read_excel("./trashwheel_dataset/trash_wheel_collection_data.xlsx", 
             2, n_max = 106) |>
  janitor::clean_names() |>
  select(-homes_powered) |>
  mutate(
    homes_powered = (500*weight_tons)/30,
    dataset = "Professor Trash Wheel")
```

# Data wrangling of Gwynnda dataset

``` r
gwynnda_trash_wheel_data =
  read_excel("./trashwheel_dataset/trash_wheel_collection_data.xlsx", 
             4, n_max = 155) |>
  janitor::clean_names() |>
  select(-homes_powered) |>
  mutate(
    homes_powered = (500*weight_tons)/30,
    dataset = "Gwynnda Trash Wheel")
```

# Data merging of the Trash Wheel datasets

``` r
final_trash_wheel_data = 
  bind_rows(mr_trash_wheel_data, professor_trash_wheel_data, gwynnda_trash_wheel_data)

filter(gwynnda_trash_wheel_data, month=="July", year=="2021") 
```

    ## # A tibble: 5 × 13
    ##   dumpster month  year date                weight_tons volume_cubic_yards
    ##      <dbl> <chr> <dbl> <dttm>                    <dbl>              <dbl>
    ## 1        1 July   2021 2021-07-03 00:00:00        0.93                 15
    ## 2        2 July   2021 2021-07-07 00:00:00        2.26                 15
    ## 3        3 July   2021 2021-07-07 00:00:00        1.62                 15
    ## 4        4 July   2021 2021-07-16 00:00:00        1.76                 15
    ## 5        5 July   2021 2021-07-30 00:00:00        1.53                 15
    ## # ℹ 7 more variables: plastic_bottles <dbl>, polystyrene <dbl>,
    ## #   cigarette_butts <dbl>, plastic_bags <dbl>, wrappers <dbl>,
    ## #   homes_powered <dbl>, dataset <chr>

The total number of observations in the final data set called
`final_trash_wheel_data` is 845. Examples of key variables in
`final_trash_wheel_data` are: dumpster number, month, year, date, weight
in tons, homes powered, name of data set (Mr.Trash Wheel, Professor
Trash Wheel, and Gwynnda Trash Wheel). I calculated `homes_powered` for
each individual data set prior to merging each data set using
`bind_rows`.

The total weight of trash collected in the Professor Trash Wheel dataset
is 216.26 tons.

In July 2021, the total number of cigarette butts collected by Gwynnda
was 3.6701^{5} cigarette butts.
